---
import Projectcard from "./projectcard.astro";
import projects from "../data/projects.json";
import aimlprojects from "../data/aimlprojects.json";

const webProjects = projects.web_projects;
const aimlProjects = aimlprojects.aiml_projects;
---

<div class="w-full max-w-[1400px] mx-auto p-4 pt-16">
  <div class="flex justify-between items-end mb-8 px-2">
    <h2 class="text-4xl font-bold text-neutral-900 dark:text-neutral-100 tracking-tight">Projects</h2>
    <div class="flex gap-1 bg-neutral-200 dark:bg-neutral-800 p-1 rounded-full">
      <button id="aiml-btn" class="px-4 py-1.5 cursor-pointer rounded-full text-sm font-medium transition-all bg-white dark:bg-neutral-700 shadow-sm text-neutral-900 dark:text-neutral-100">AI/ML</button>
      <button id="web-btn" class="px-4 py-1.5 cursor-pointer rounded-full text-sm font-medium transition-all text-neutral-700 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100">Web</button>
    </div>
  </div>

  <div id="web-projects" class="grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 auto-rows-fr" style="display: none;">
    {webProjects.map((project: any) => (
      <Projectcard
        class="col-span-1 h-full"
        name={project.name}
        techstack={project.techstack}
        summary={project.summary}
        github={project.github}
        live={project.live}
      />
    ))}
  </div>

  <div id="aiml-projects" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 auto-rows-fr">
    {aimlProjects.map((project: any) => (
      <Projectcard
        class="col-span-1 h-full"
        name={project.name}
        techstack={project.techstack}
        summary={project.summary}
        github={project.github}
        live={project.live}
      />
    ))}
  </div>
</div>

<script>
  const webBtn = document.getElementById('web-btn');
  const aimlBtn = document.getElementById('aiml-btn');
  const webProjects = document.getElementById('web-projects');
  const aimlProjects = document.getElementById('aiml-projects');

  aimlBtn?.classList.add('bg-white', 'dark:bg-neutral-700', 'shadow-sm', 'text-neutral-900', 'dark:text-neutral-100');
  webBtn?.classList.add('text-neutral-500');

  webBtn?.addEventListener('click', () => {
    if (webProjects && aimlProjects) {
      webProjects.style.display = 'grid';
      aimlProjects.style.display = 'none';
    }
    
    webBtn.classList.add('bg-white', 'dark:bg-neutral-700', 'shadow-sm', 'text-neutral-900', 'dark:text-neutral-100');
    webBtn.classList.remove('text-neutral-500');
    
    aimlBtn?.classList.remove('bg-white', 'dark:bg-neutral-700', 'shadow-sm', 'text-neutral-900', 'dark:text-neutral-100');
    aimlBtn?.classList.add('text-neutral-500');
  });

  aimlBtn?.addEventListener('click', () => {
    if (webProjects && aimlProjects) {
      aimlProjects.style.display = 'grid';
      webProjects.style.display = 'none';
    }
    
    aimlBtn.classList.add('bg-white', 'dark:bg-neutral-700', 'shadow-sm', 'text-neutral-900', 'dark:text-neutral-100');
    aimlBtn.classList.remove('text-neutral-500');
    
    webBtn?.classList.remove('bg-white', 'dark:bg-neutral-700', 'shadow-sm', 'text-neutral-900', 'dark:text-neutral-100');
    webBtn?.classList.add('text-neutral-500');
  });
</script>
